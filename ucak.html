<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>UÃ§ak Oyunu</title>
<style>
  body {
    background: #121212;
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: #fff;
    font-family: Arial, sans-serif;
  }
  #game-container {
    position: relative;
    width: 300px;
    height: 300px;
    border: 2px solid #00ff99;
    border-radius: 15px;
    overflow: hidden;
    background: linear-gradient(to bottom, #002200, #004400);
  }
  #plane {
    position: absolute;
    width: 60px;
    top: 120px;
    left: -60px;
    animation: flyRight 4s linear forwards;
  }
  @keyframes flyRight {
    0% { left: -60px; transform: rotate(0deg); }
    50% { transform: rotate(10deg); }
    100% { left: 320px; transform: rotate(0deg);}
  }
  #btn-cashout {
    margin-top: 20px;
    padding: 10px 25px;
    font-size: 1.2rem;
    background: #00ff99;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    color: #121212;
  }
  #status {
    margin-top: 15px;
    font-size: 1rem;
  }
</style>
</head>
<body>
<div id="game-container">
  <!-- UÃ§ak SVG (rastgele renkli) -->
  <svg id="plane" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="plane-path" fill="#00ff99" d="M256 0L317 192H256L317 320L256 512L195 320L256 192H195L256 0Z"/>
  </svg>
</div>
<button id="btn-cashout" disabled>ðŸ’° Cash Out</button>
<div id="status">BaÅŸlamak iÃ§in uÃ§aÄŸÄ±n hareketini bekle...</div>

<script>
  const plane = document.getElementById('plane');
  const btnCashOut = document.getElementById('btn-cashout');
  const status = document.getElementById('status');

  // Rastgele renk seÃ§imi
  function randomColor() {
    const letters = '0123456789ABCDEF';
    let color = '#';
    for(let i=0; i<6; i++){
      color += letters[Math.floor(Math.random()*16)];
    }
    return color;
  }

  // UÃ§ak rengini ayarla
  document.getElementById('plane-path').setAttribute('fill', randomColor());

  // Animasyon sÃ¼resi
  const animationDuration = 4000; // 4 saniye

  let cashOutDone = false;
  let cashOutTime = 0;

  function startGame(){
    status.textContent = "UÃ§ak kalktÄ±! Hemen Cash Out yapabilirsiniz!";
    btnCashOut.disabled = false;
    cashOutDone = false;
    cashOutTime = 0;
    plane.style.animationPlayState = "running";

    setTimeout(() => {
      if (!cashOutDone) {
        status.textContent = "ðŸ’¥ UÃ§ak dÃ¼ÅŸtÃ¼! Kaybettiniz.";
        btnCashOut.disabled = true;
        sendResultToBot("lose", 100);  // 100 TL Ã¶rnek bahis
      }
    }, animationDuration);
  }

  btnCashOut.addEventListener('click', () => {
    if (!cashOutDone) {
      cashOutDone = true;
      btnCashOut.disabled = true;
      plane.style.animationPlayState = "paused";

      // Ã–rnek: kazandÄ±ÄŸÄ±n miktar animasyonun yÃ¼zde kaÃ§Ä±nda cash out yaptÄ±ysan ona gÃ¶re
      // burada basitÃ§e %50 zamanÄ±nda cash out yapmÄ±ÅŸ gibi
      const kazanilan = Math.floor(Math.random() * 500) + 50; // 50-550 TL arasÄ± rastgele

      status.textContent = `ðŸŽ‰ Cash Out yapÄ±ldÄ±! KazandÄ±nÄ±z: ${kazanilan} TL`;

      sendResultToBot("win", kazanilan);
    }
  });

  function sendResultToBot(result, amount){
    // Telegram WebApp API
    if(window.Telegram.WebApp){
      Telegram.WebApp.sendData(JSON.stringify({result, amount}));
    }
  }

  // Oyun baÅŸladÄ±ktan sonra animasyon Ã§alÄ±ÅŸÄ±r
  plane.style.animationPlayState = "paused";
  setTimeout(() => {
    plane.style.animationPlayState = "running";
    startGame();
  }, 1000);
</script>
</body>
</html>
